import { useFormik } from "formik";
import { useCallback, useState } from "react";
import { SiGithub } from "react-icons/si";
import { FaGoogle } from "react-icons/fa";
import { Link } from "react-router-dom";
import * as yup from "yup";
import { auth } from "../../../firebase";
import "./LoginPage.css";
import Toast from "../../../Components/Toast/Toast";
import Input from "../../../Components/Input";

const LoginPage = () => {
  const { errors, touched, handleReset, getFieldProps, isValid } = useFormik({
    initialValues: { email: "", password: "" },
    validationSchema: yup.object().shape({
      email: yup.string().required("Email is required").email(),

      password: yup.string().required("Password is required").max(20).min(8),
    }),
    onSubmit: () => {},
  });

  const [showToast, setShowToast] = useState(false);
  const [error, setError] = useState<any>("");

  const handleLogin = useCallback(async (event: any) => {
    event.preventDefault();
    setError("");
    setShowToast(false);
    const { email, password } = event.target.elements;
    console.log("User ", email.value, password.value);
    try {
      await auth.signInWithEmailAndPassword(email.value, password.value);
      console.log("logged In");
    } catch (error: any) {
      console.log(error);
      setError(error.message);
      setShowToast(true);
    }
  }, []);

  return (
    <div className=" bgImage flex justify-center items-center h-screen">
      <Toast type="Error" show={showToast} message={error} />
      <div className="md:mx-12 lg:mx-32 xl:mx-52  flex h-4/5 w-full ">
        <div className="side-container justify-center items-center md:flex hidden  h-full md:w-1/2 p-5">
          <div className="text-9xl font-bold font-Sora">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              version="1.1"
              width="495.285714285714"
              height="495.7815129128116"
              viewBox="0 0 3214.285714285714 3052.7815129128116"
            >
              <rect
                fill="#262833"
                width="0"
                height="0"
              />
              <g transform="scale(10.714285714285714) translate(10, 10)">
                <defs id="SvgjsDefs1267"></defs>
                <g
                  id="SvgjsG1268"
                  transform="matrix(2.556473829201102,0,0,2.556473829201102,13.545110192837463,-25.56473829201102)"
                  fill="#39e991"
                >
                  <path
                    xmlns="http://www.w3.org/2000/svg"
                    d="M29.5019531,48.9431152v7.723877c0,0.4033203,0.2421875,0.7666016,0.6132812,0.9228516L49,65.4990234v4.0447998  c-5.1865234,0.5044556-9.2539062,4.8864136-9.2539062,10.2022705C39.7460938,85.4003906,44.3457031,90,50,90  s10.2539062-4.5996094,10.2539062-10.2539062c0-5.3158569-4.0673828-9.6978149-9.2539062-10.2022705v-4.7115479  c0-0.0014648,0-0.0028076,0-0.0042725V60.696167l19.2236328-8.0506592c0.3710938-0.15625,0.6132812-0.5195312,0.6132812-0.9228516  v-8.3056641h6.1826172c0.5527344,0,1-0.4472656,1-1V28.0517578c0-0.5527344-0.4472656-1-1-1H62.6542969  c-0.5527344,0-1,0.4472656-1,1v14.3652344c0,0.5527344,0.4472656,1,1,1h6.1826172v7.640625L51,58.5266113V23.5976562h10.5976562  c0.4042969,0,0.7695312-0.2431641,0.9238281-0.6171875c0.1552734-0.3740234,0.0693359-0.8037109-0.2167969-1.0898438  L50.7070312,10.2929688c-0.390625-0.390625-1.0234375-0.390625-1.4140625,0L37.6953125,21.890625  c-0.2861328,0.2861328-0.3720703,0.7158203-0.2167969,1.0898438c0.1542969,0.3740234,0.5195312,0.6171875,0.9238281,0.6171875H49  v39.7318115l-17.4980469-7.3275146v-7.0588379c4.604248-0.5004272,8.2001953-4.4091797,8.2001953-9.1442871  c0-5.0732422-4.1269531-9.2011719-9.2001953-9.2011719s-9.2011719,4.1279297-9.2011719,9.2011719  C21.3007812,44.5339355,24.8977051,48.442688,29.5019531,48.9431152z M63.6542969,29.0517578h12.3652344v12.3652344H63.6542969  V29.0517578z M50,12.4140625l9.1835938,9.1835938H40.8164062L50,12.4140625z M58.2539062,79.7460938  C58.2539062,84.296875,54.5507812,88,50,88s-8.2539062-3.703125-8.2539062-8.2539062S45.4492188,71.4931641,50,71.4931641  S58.2539062,75.1953125,58.2539062,79.7460938z M30.5019531,32.5976562c3.9697266,0,7.2001953,3.2304688,7.2001953,7.2011719  S34.4716797,47,30.5019531,47c-3.9707031,0-7.2011719-3.2304688-7.2011719-7.2011719S26.53125,32.5976562,30.5019531,32.5976562z"
                  ></path>
                </g>
                <g
                  id="SvgjsG1269"
                  transform="matrix(1.2971370295946,0,0,1.2971370295946,-1.9975906668322658,219.0072270717185)"
                  fill="#ffffff"
                >
                  <path d="M4.72 11.34 l6.98 0 l0 2.74 l-6.98 0 l0 5.92 l-3.18 0 l0 -14.62 l11.08 0 l0 2.74 l-7.9 0 l0 3.22 z M17.119999999999997 7.369999999999999 q-0.48 0.47 -1.16 0.47 q-0.7 0 -1.19 -0.47 t-0.49 -1.15 q0 -0.66 0.49 -1.13 t1.19 -0.47 q0.68 0 1.16 0.47 t0.48 1.13 q0 0.68 -0.48 1.15 z M14.459999999999999 9.02 l3 0 l0 10.98 l-3 0 l0 -10.98 z M29.63 10.02 q1.03 1.22 1.03 3.48 l0 6.5 l-3.06 0 l0 -6.5 q0 -2.22 -2.12 -2.22 q-0.82 0 -1.48 0.65 t-0.62 2.25 l0 5.82 l-2.98 0 l0 -11 l2.98 0 l0 0.98 q0.54 -0.54 1.36 -0.86 t1.58 -0.32 q2.28 0 3.31 1.22 z M41.92 18.9 q-0.38 0.52 -1.31 0.93 t-2.03 0.41 q-1.7 0 -2.95 -0.76 t-1.91 -2.07 t-0.66 -2.91 t0.66 -2.91 t1.91 -2.07 t2.95 -0.76 q1.14 0 2.01 0.39 t1.33 0.99 l0 -5.26 l2.96 0 l0 15.12 l-2.96 0 l0 -1.1 z M41.22 12.25 q-0.82 -0.87 -2.2 -0.87 q-1.4 0 -2.21 0.87 t-0.81 2.25 q0 1.34 0.83 2.22 t2.19 0.88 q1.4 0 2.21 -0.83 t0.81 -2.27 q0 -1.38 -0.82 -2.25 z M61.34 14.46 l0 5.54 l-3.16 0 l0 -5.54 l-5.76 -9.06 l3.7 0 l3.64 5.9 l3.68 -5.9 l3.7 0 z M69.51 19.49 q-1.37 -0.77 -2.17 -2.09 t-0.8 -2.88 q0 -1.54 0.8 -2.86 t2.17 -2.09 t2.99 -0.77 t3 0.77 t2.19 2.09 t0.81 2.86 q0 1.56 -0.81 2.88 t-2.19 2.09 t-3 0.77 t-2.99 -0.77 z M70.98 11.83 q-0.7 0.41 -1.1 1.12 t-0.4 1.57 q0 0.9 0.39 1.61 t1.08 1.12 t1.55 0.41 q0.84 0 1.53 -0.41 t1.09 -1.13 t0.4 -1.6 q0 -0.86 -0.4 -1.57 t-1.09 -1.12 t-1.53 -0.41 q-0.82 0 -1.52 0.41 z M80.72 15.54 l0 -6.5 l3.02 0 l0 6.5 q0 1.18 0.59 1.69 t1.55 0.51 q0.84 0 1.5 -0.65 t0.6 -2.23 l0 -5.82 l3 0 l0 10.96 l-3 0 l0 -0.94 q-0.54 0.56 -1.31 0.87 t-1.63 0.31 q-4.32 0 -4.32 -4.7 z M99.14 11.87 q-0.86 0.21 -1.58 0.99 t-0.72 2.28 l0 4.86 l-2.98 0 l0 -11 l2.98 0 l0 1.46 q0.74 -0.98 1.81 -1.33 t1.95 -0.33 l0 2.92 q-0.6 -0.06 -1.46 0.15 z M108.56 5.380000000000001 l6.04 0 q3.26 0 5.34 1.84 q1.12 0.98 1.7 2.37 t0.58 3.09 q0 1.66 -0.6 3.09 t-1.68 2.41 q-1 0.88 -2.37 1.35 t-2.97 0.47 l-6.04 0 l0 -14.62 z M114.6 17.259999999999998 q1.88 0 3.15 -0.98 t1.27 -3.58 t-1.28 -3.58 t-3.14 -0.98 l-2.88 0 l0 9.12 l2.88 0 z M127.53 19.74 q-1.37 -0.54 -2.35 -1.83 t-0.98 -3.37 t0.99 -3.36 t2.37 -1.82 t2.62 -0.54 q1.44 0 2.74 0.64 t2.13 1.88 t0.87 2.94 q0 0.52 -0.02 0.9 t-0.04 0.48 l-8.68 0 q0.24 1.16 1.2 1.58 t1.8 0.42 q1.08 0 1.72 -0.39 t1.1 -0.89 l2.32 1.34 q-1.88 2.56 -5.14 2.56 q-1.28 0 -2.65 -0.54 z M128.14000000000001 12.05 q-0.78 0.61 -0.88 1.49 l5.5 0 q-0.06 -0.52 -0.4 -1 t-0.91 -0.79 t-1.29 -0.31 q-1.24 0 -2.02 0.61 z M136.52 9.04 l3.32 0 l2.56 5.38 l2.56 -5.38 l3.34 0 l-5.9 11.44 z M152.25000000000003 19.74 q-1.37 -0.54 -2.35 -1.83 t-0.98 -3.37 t0.99 -3.36 t2.37 -1.82 t2.62 -0.54 q1.44 0 2.74 0.64 t2.13 1.88 t0.87 2.94 q0 0.52 -0.02 0.9 t-0.04 0.48 l-8.68 0 q0.24 1.16 1.2 1.58 t1.8 0.42 q1.08 0 1.72 -0.39 t1.1 -0.89 l2.32 1.34 q-1.88 2.56 -5.14 2.56 q-1.28 0 -2.65 -0.54 z M152.86000000000004 12.05 q-0.78 0.61 -0.88 1.49 l5.5 0 q-0.06 -0.52 -0.4 -1 t-0.91 -0.79 t-1.29 -0.31 q-1.24 0 -2.02 0.61 z M163.08000000000004 4.880000000000001 l3 0 l0 15.12 l-3 0 l0 -15.12 z M171.39000000000004 19.49 q-1.37 -0.77 -2.17 -2.09 t-0.8 -2.88 q0 -1.54 0.8 -2.86 t2.17 -2.09 t2.99 -0.77 t3 0.77 t2.19 2.09 t0.81 2.86 q0 1.56 -0.81 2.88 t-2.19 2.09 t-3 0.77 t-2.99 -0.77 z M172.86000000000004 11.83 q-0.7 0.41 -1.1 1.12 t-0.4 1.57 q0 0.9 0.39 1.61 t1.08 1.12 t1.55 0.41 q0.84 0 1.53 -0.41 t1.09 -1.13 t0.4 -1.6 q0 -0.86 -0.4 -1.57 t-1.09 -1.12 t-1.53 -0.41 q-0.82 0 -1.52 0.41 z M185.78000000000003 10.1 q0.38 -0.52 1.31 -0.93 t2.03 -0.41 q1.7 0 2.95 0.76 t1.91 2.07 t0.66 2.91 t-0.66 2.91 t-1.91 2.07 t-2.95 0.76 q-1.14 0 -2.01 -0.39 t-1.33 -0.99 l0 4.68 l-2.96 0 l0 -14.54 l2.96 0 l0 1.1 z M186.48000000000002 16.75 q0.82 0.87 2.2 0.87 q1.4 0 2.21 -0.87 t0.81 -2.25 q0 -1.34 -0.83 -2.22 t-2.19 -0.88 q-1.4 0 -2.21 0.83 t-0.81 2.27 q0 1.38 0.82 2.25 z M199.89000000000001 19.74 q-1.37 -0.54 -2.35 -1.83 t-0.98 -3.37 t0.99 -3.36 t2.37 -1.82 t2.62 -0.54 q1.44 0 2.74 0.64 t2.13 1.88 t0.87 2.94 q0 0.52 -0.02 0.9 t-0.04 0.48 l-8.68 0 q0.24 1.16 1.2 1.58 t1.8 0.42 q1.08 0 1.72 -0.39 t1.1 -0.89 l2.32 1.34 q-1.88 2.56 -5.14 2.56 q-1.28 0 -2.65 -0.54 z M200.50000000000003 12.05 q-0.78 0.61 -0.88 1.49 l5.5 0 q-0.06 -0.52 -0.4 -1 t-0.91 -0.79 t-1.29 -0.31 q-1.24 0 -2.02 0.61 z M215.94000000000003 11.87 q-0.86 0.21 -1.58 0.99 t-0.72 2.28 l0 4.86 l-2.98 0 l0 -11 l2.98 0 l0 1.46 q0.74 -0.98 1.81 -1.33 t1.95 -0.33 l0 2.92 q-0.6 -0.06 -1.46 0.15 z"></path>
                </g>
                <g
                  id="SvgjsG1270"
                  transform="matrix(0.33106681350212674,0,0,0.33106681350212674,35.35773040232832,258.18575385569375)"
                  fill="#39e991"
                >
                  <path d="M3.26 5.84 l0 14.16 l-1.32 0 l0 -14.16 l1.32 0 z M19.064 5.84 l8.62 12.4 l0.04 0 l0 -12.4 l1.32 0 l0 14.16 l-1.7 0 l-8.62 -12.4 l-0.04 0 l0 12.4 l-1.32 0 l0 -14.16 l1.7 0 z M44.848 5.84 l8.62 12.4 l0.04 0 l0 -12.4 l1.32 0 l0 14.16 l-1.7 0 l-8.62 -12.4 l-0.04 0 l0 12.4 l-1.32 0 l0 -14.16 l1.7 0 z M69.332 12.92 q0 2.7 1.66 4.45 t4.34 1.79 q2.7 0 4.34 -1.77 t1.66 -4.47 q0 -2.74 -1.64 -4.47 t-4.38 -1.77 q-2.68 0 -4.32 1.76 t-1.66 4.48 z M75.332 5.48 q2.16 0 3.82 0.95 t2.57 2.66 t0.93 3.83 q0 3.26 -2.06 5.33 t-5.26 2.11 q-3.22 0 -5.24 -2.09 t-2.08 -5.35 q0.02 -3.26 2.04 -5.32 t5.28 -2.12 z M95.25599999999999 5.84 l4.56 12.42 l4.6 -12.42 l1.4 0 l-5.38 14.16 l-1.32 0 l-5.28 -14.16 l1.42 0 z M119.57999999999998 15.04 l6.5 0 l-3.2 -7.76 z M123.61999999999999 5.84 l5.96 14.16 l-1.48 0 l-1.54 -3.76 l-7.5 0 l-1.6 3.76 l-1.38 0 l6.18 -14.16 l1.36 0 z M151.144 5.84 l0 1.2 l-4.84 0 l0 12.96 l-1.32 0 l0 -12.96 l-4.84 0 l0 -1.2 l11 0 z M164.868 5.84 l0 14.16 l-1.32 0 l0 -14.16 l1.32 0 z M178.39200000000002 5.84 l4.56 12.42 l4.6 -12.42 l1.4 0 l-5.38 14.16 l-1.32 0 l-5.28 -14.16 l1.42 0 z M209.716 5.84 l0 1.2 l-7.34 0 l0 5.04 l6.88 0 l0 1.2 l-6.88 0 l0 5.52 l7.66 0 l0 1.2 l-8.98 0 l0 -14.16 l8.66 0 z M242.52400000000003 18.8 q3.04 0 4.8 -1.54 t1.78 -4.24 q0 -2.88 -1.75 -4.42 t-4.89 -1.56 l-2.76 0 l0 11.76 l2.82 0 z M242.80400000000003 5.84 q3.56 0 5.57 1.92 t2.05 5.26 q0 1.96 -0.89 3.55 t-2.56 2.51 t-4.09 0.92 l-4.5 0 l0 -14.16 l4.42 0 z M272.26800000000003 5.84 l0 1.2 l-7.34 0 l0 5.04 l6.88 0 l0 1.2 l-6.88 0 l0 5.52 l7.66 0 l0 1.2 l-8.98 0 l0 -14.16 l8.66 0 z M285.112 5.84 l4.56 12.42 l4.6 -12.42 l1.4 0 l-5.38 14.16 l-1.32 0 l-5.28 -14.16 l1.42 0 z M316.43600000000004 5.84 l0 1.2 l-7.34 0 l0 5.04 l6.88 0 l0 1.2 l-6.88 0 l0 5.52 l7.66 0 l0 1.2 l-8.98 0 l0 -14.16 l8.66 0 z M331.18 5.84 l0 12.96 l6.6 0 l0 1.2 l-7.92 0 l0 -14.16 l1.32 0 z M350.484 12.92 q0 2.7 1.66 4.45 t4.34 1.79 q2.7 0 4.34 -1.77 t1.66 -4.47 q0 -2.74 -1.64 -4.47 t-4.38 -1.77 q-2.68 0 -4.32 1.76 t-1.66 4.48 z M356.484 5.48 q2.16 0 3.82 0.95 t2.57 2.66 t0.93 3.83 q0 3.26 -2.06 5.33 t-5.26 2.11 q-3.22 0 -5.24 -2.09 t-2.08 -5.35 q0.02 -3.26 2.04 -5.32 t5.28 -2.12 z M381.368 12.08 q1.28 0 2.1 -0.63 t0.84 -1.87 q0 -1.16 -0.82 -1.85 t-2.18 -0.69 l-3 0 l0 5.04 l3.06 0 z M381.028 5.84 q2.16 0 3.36 0.96 t1.24 2.78 q0 1.7 -1.16 2.69 t-3.02 1.01 l-3.14 0 l0 6.72 l-1.32 0 l0 -14.16 l4.04 0 z M407.35200000000003 5.84 l0 1.2 l-7.34 0 l0 5.04 l6.88 0 l0 1.2 l-6.88 0 l0 5.52 l7.66 0 l0 1.2 l-8.98 0 l0 -14.16 l8.66 0 z M424.99600000000004 12.08 q1.54 0 2.38 -0.69 t0.84 -1.83 t-0.82 -1.82 t-2.44 -0.7 l-2.86 0 l0 5.04 l2.9 0 z M424.596 5.84 q4.9 0 4.94 3.72 q0 3.14 -3.62 3.64 l4.12 6.8 l-1.5 0 l-3.98 -6.72 l-2.46 0 l0 6.72 l-1.32 0 l0 -14.16 l3.82 0 z M462.664 12.08 q1.28 0 2.1 -0.63 t0.84 -1.87 q0 -1.16 -0.82 -1.85 t-2.18 -0.69 l-3 0 l0 5.04 l3.06 0 z M462.324 5.84 q2.16 0 3.36 0.96 t1.24 2.78 q0 1.7 -1.16 2.69 t-3.02 1.01 l-3.14 0 l0 6.72 l-1.32 0 l0 -14.16 l4.04 0 z M481.308 5.84 l0 12.96 l6.6 0 l0 1.2 l-7.92 0 l0 -14.16 l1.32 0 z M501.872 15.04 l6.5 0 l-3.2 -7.76 z M505.912 5.84 l5.96 14.16 l-1.48 0 l-1.54 -3.76 l-7.5 0 l-1.6 3.76 l-1.38 0 l6.18 -14.16 l1.36 0 z M533.436 5.84 l0 1.2 l-4.84 0 l0 12.96 l-1.32 0 l0 -12.96 l-4.84 0 l0 -1.2 l11 0 z M554.3199999999999 5.84 l0 1.2 l-7.16 0 l0 5.04 l6.66 0 l0 1.2 l-6.66 0 l0 6.72 l-1.32 0 l0 -14.16 l8.48 0 z M567.5840000000001 12.92 q0 2.7 1.66 4.45 t4.34 1.79 q2.7 0 4.34 -1.77 t1.66 -4.47 q0 -2.74 -1.64 -4.47 t-4.38 -1.77 q-2.68 0 -4.32 1.76 t-1.66 4.48 z M573.5840000000001 5.48 q2.16 0 3.82 0.95 t2.57 2.66 t0.93 3.83 q0 3.26 -2.06 5.33 t-5.26 2.11 q-3.22 0 -5.24 -2.09 t-2.08 -5.35 q0.02 -3.26 2.04 -5.32 t5.28 -2.12 z M598.308 12.08 q1.54 0 2.38 -0.69 t0.84 -1.83 t-0.82 -1.82 t-2.44 -0.7 l-2.86 0 l0 5.04 l2.9 0 z M597.908 5.84 q4.9 0 4.94 3.72 q0 3.14 -3.62 3.64 l4.12 6.8 l-1.5 0 l-3.98 -6.72 l-2.46 0 l0 6.72 l-1.32 0 l0 -14.16 l3.82 0 z M618.012 5.84 l5.16 11.88 l5.16 -11.88 l1.88 0 l0 14.16 l-1.32 0 l0 -12.48 l-0.04 0 l-5.4 12.48 l-0.58 0 l-5.48 -12.48 l-0.04 0 l0 12.48 l-1.32 0 l0 -14.16 l1.98 0 z"></path>
                </g>
              </g>
            </svg>
          </div>
        </div>

        <div className="bg-white md:w-1/2 p-5 w-full mx-6 sm:mx-20 md:mx-0 text-center flex-col justify-center ">
          <h1 className="text-4xl font-Sora text-gray-800  font-extrabold">
            Sign In
            <p className="text-sm font-bold pt-2">
              New here?{" "}
              <Link className="text-blue-800 font-Sora" to="/signup">
                Create an account
              </Link>
            </p>
          </h1>

          <form
            onSubmit={handleLogin}
            onReset={handleReset}
            className="w-full md:px-8 xl:px-10 space-y-6"
          >
            <div className="w-full pt-4 ">
              <Input
                id="email"
                placeholder="Email Address"
                touched={touched.email}
                error={errors.email}
                {...getFieldProps("email")}
              />

              <Input
                id="password"
                placeholder="Password"
                touched={touched.password}
                error={errors.password}
                type="Password"
                {...getFieldProps("password")}
              />
            </div>

            <div className="">
              <button
                type="submit"
                className={`bg-purple-500 rounded-3xl px-7 w-full py-2 font-Sora font-bold text-white  ${
                  !isValid && "cursor-not-allowed"
                } `}
                disabled={!isValid}
              >
                Sign In
              </button>
            </div>
            <h1 className="text-base font-Sora font-semibold pt-5">
              or Connect with Social Media
            </h1>

            <div className="space-y-3 font-Sora ">
              <div className="bg-red-400 flex rounded-3xl text-white px-7 md:px-4 lg:px-7 w-full py-2 cursor-pointer">
                <FaGoogle className="w-7 h-7" />
                <div className="w-full flex items-center justify-center">
                  Sign In with Google
                </div>
              </div>
              {/* <div className="bg-blue-500 flex rounded-3xl text-white px-7 md:px-4 lg:px-7 w-full py-2 cursor-pointer">
                <SiLinkedin className="w-7 h-7" />
                <div className="w-full flex items-center justify-center">
                  Sign In with LinkedIn
                </div>
              </div> */}
              <div className="bg-gray-900 flex  rounded-3xl text-white px-7 md:px-4 lg:px-7 w-full py-2 cursor-pointer">
                <SiGithub className="w-7 h-7" />
                <div className="w-full flex items-center justify-center">
                  Sign In with Github
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  );
};

export default LoginPage;
